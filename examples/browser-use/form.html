<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sign Up Form Demo</title>
    <style>
      :root {
        color-scheme: light dark;
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: #f2f5f9;
      }

      body {
        margin: 0;
        padding: 1.25rem;
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(135deg, #f7fafc 0%, #e3ecf8 100%);
        min-height: 100vh;
        box-sizing: border-box;
      }

      .card {
        background: #ffffff;
        border-radius: 16px;
        box-shadow: 0 18px 35px rgba(15, 23, 42, 0.15);
        width: min(560px, 100%);
        padding: 24px 28px 28px;
        box-sizing: border-box;
      }

      h1 {
        margin: 0 0 0.75rem;
        font-size: 1.65rem;
        color: #1e293b;
      }

      p.description {
        margin: 0 0 1.25rem;
        color: #475569;
        line-height: 1.5;
        font-size: 0.9rem;
      }

      form {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem 1.25rem;
      }

      .field {
        display: flex;
        flex-direction: column;
        gap: 0.35rem;
      }

      label {
        font-weight: 600;
        color: #0f172a;
        font-size: 0.875rem;
      }

      input,
      select {
        border: 1px solid rgba(148, 163, 184, 0.5);
        border-radius: 8px;
        padding: 0.6rem 0.75rem;
        font-size: 0.95rem;
        color: #1e293b;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
        background-color: #f8fafc;
      }

      input:focus,
      select:focus {
        outline: none;
        border-color: #2563eb;
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.18);
        background-color: #fff;
      }

      input[aria-invalid="true"] {
        border-color: #e11d48;
        box-shadow: 0 0 0 3px rgba(225, 29, 72, 0.12);
        background-color: #fff5f7;
      }

      .error-message {
        font-size: 0.85rem;
        color: #be123c;
        min-height: 1.15rem;
        opacity: 0;
        transition: opacity 0.2s ease;
      }

      .error-message[data-error-active="true"] {
        opacity: 1;
      }

      .full-width {
        grid-column: 1 / -1;
      }

      button[type="submit"] {
        margin-top: 0.75rem;
        grid-column: 1 / -1;
        background: linear-gradient(135deg, #2563eb, #1d4ed8);
        color: #fff;
        border: none;
        border-radius: 8px;
        padding: 0.75rem 1.4rem;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.2s ease;
      }

      button[type="submit"]:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 20px rgba(37, 99, 235, 0.25);
      }

      .status-area {
        margin-top: 1rem;
        padding: 0.75rem 1rem;
        background: #f5f9ff;
        border-radius: 8px;
        border: 1px solid rgba(59, 130, 246, 0.2);
        color: #1e3a8a;
        font-weight: 500;
        font-size: 0.875rem;
      }

      .status-area.success {
        background: #ecfdf5;
        border-color: rgba(16, 185, 129, 0.3);
        color: #047857;
        margin-top: 0;
        padding: 2rem 2.5rem;
        font-size: 1.25rem;
        text-align: center;
        font-weight: 600;
      }

      .status-area.error {
        background: #fef2f2;
        border-color: rgba(248, 113, 113, 0.3);
        color: #b91c1c;
      }

      .hidden {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <article class="card">
      <h1>Welcome to ACE!</h1>
      <p class="description">Sign up and get started.</p>

      <form id="signup-form" novalidate>
        <div class="field">
          <label for="first_name">First Name</label>
          <input
            id="first_name"
            name="first_name"
            type="text"
            placeholder="Jane"
            required
          />
          <span class="error-message" data-field="first_name"></span>
        </div>

        <div class="field">
          <label for="last_name">Last Name</label>
          <input
            id="last_name"
            name="last_name"
            type="text"
            placeholder="Doe"
            required
          />
          <span class="error-message" data-field="last_name"></span>
        </div>

        <div class="field full-width">
          <label for="email">Email</label>
          <input
            id="email"
            name="email"
            type="email"
            placeholder="jane.doe@example.com"
            required
          />
          <span class="error-message" data-field="email"></span>
        </div>

        <div class="field full-width">
          <label for="password">Password</label>
          <input
            id="password"
            name="password"
            type="password"
            placeholder="Enter a secure password"
            required
          />
          <span class="error-message" data-field="password"></span>
        </div>

        <button id="submit" type="submit">Create Account</button>
      </form>

      <section id="status" class="status-area" aria-live="polite">
        Form has not been submitted yet.
      </section>
    </article>

    <script>
      const form = document.getElementById("signup-form");
      const statusArea = document.getElementById("status");
      const errorMessages = Array.from(
        document.querySelectorAll(".error-message")
      );

      function validatePassword(password) {
        const errors = [];

        // Rule 1: More than 12 characters (at least 13)
        if (password.length <= 12) {
          errors.push("Password must be more than 12 characters long.");
        }

        // Rule 2: Must contain at least one uppercase letter
        if (!/[A-Z]/.test(password)) {
          errors.push("Password must contain at least one uppercase letter.");
        }

        // Rule 3: Must contain at least one lowercase letter
        if (!/[a-z]/.test(password)) {
          errors.push("Password must contain at least one lowercase letter.");
        }

        // Rule 4: Must contain at least one number
        if (!/\d/.test(password)) {
          errors.push("Password must contain at least one number.");
        }

        // Rule 5: Must contain at least one special character
        if (!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) {
          errors.push(
            "Password must contain at least one special character (!@#$%^&* etc.)."
          );
        }

        return errors;
      }

      const REQUIRED_FIELDS = ["first_name", "last_name", "email", "password"];

      window.__FORM_STATE__ = {
        submitted: false,
        timestamp: null,
        errors: {},
        successMessage: null,
      };

      function resetErrors() {
        errorMessages.forEach((msg) => {
          msg.textContent = "";
          msg.dataset.errorActive = "false";
        });
        Array.from(form.elements).forEach((el) => {
          if (
            el instanceof HTMLInputElement ||
            el instanceof HTMLSelectElement
          ) {
            el.setAttribute("aria-invalid", "false");
          }
        });
        statusArea.classList.remove("error", "success");
      }

      function registerError(field, message) {
        const span = document.querySelector(
          `.error-message[data-field="${field}"]`
        );
        if (span) {
          span.textContent = message;
          span.dataset.errorActive = "true";
        }
        const element = form.elements.namedItem(field);
        if (
          element instanceof HTMLInputElement ||
          element instanceof HTMLSelectElement
        ) {
          element.setAttribute("aria-invalid", "true");
        }
        window.__FORM_STATE__.errors[field] = { message };
      }

      function markSuccess(message) {
        statusArea.textContent = message;
        statusArea.classList.remove("error");
        statusArea.classList.add("success");

        // Hide form and header elements
        document.querySelector("h1").classList.add("hidden");
        document.querySelector("p.description").classList.add("hidden");
        form.classList.add("hidden");
      }

      function markFailure(message) {
        statusArea.textContent = message;
        statusArea.classList.remove("success");
        statusArea.classList.add("error");
      }

      form.addEventListener("submit", (event) => {
        event.preventDefault();
        resetErrors();
        window.__FORM_STATE__ = {
          submitted: false,
          timestamp: new Date().toISOString(),
          errors: {},
          successMessage: null,
        };

        let hasError = false;

        // Check required fields
        for (const field of REQUIRED_FIELDS) {
          const element = form.elements.namedItem(field);
          if (!element) continue;
          const value = element.value.trim();
          if (!value) {
            registerError(field, "This field is required.");
            hasError = true;
          }
        }

        // Validate email format
        const emailElement = form.elements.namedItem("email");
        if (emailElement && emailElement.value.trim()) {
          const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailPattern.test(emailElement.value.trim())) {
            registerError("email", "Please enter a valid email address.");
            hasError = true;
          }
        }

        // Validate password with common rules
        const passwordElement = form.elements.namedItem("password");
        if (passwordElement && passwordElement.value.trim()) {
          const passwordErrors = validatePassword(passwordElement.value.trim());
          if (passwordErrors.length > 0) {
            // Show first error message
            registerError("password", passwordErrors[0]);
            hasError = true;
          }
        }

        if (hasError) {
          markFailure(
            "Submission blocked. Fix validation errors before retrying."
          );
          window.__FORM_STATE__.submitted = false;
          return;
        }

        window.__FORM_STATE__.submitted = true;
        window.__FORM_STATE__.errors = {};
        window.__FORM_STATE__.successMessage = "Account created successfully!";
        window.__FORM_STATE__.timestamp = new Date().toISOString();

        markSuccess(window.__FORM_STATE__.successMessage);
      });
    </script>
  </body>
</html>
